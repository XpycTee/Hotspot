{% extends 'auth/base.html' %}

{% block title %}
{{ config['LANGUAGE_CONTENT']['html']['code']['title'] }}
{% endblock %}

{% block content %}
<form action="/auth" method="post" id="codeForm">

    <label for="code">{{ config['LANGUAGE_CONTENT']['html']['code']['label_code'] }}</label>
    <input class="input-auth" type="tel" id="code" name="code" maxlength="4" oninput="checkCodeForm()" placeholder="{{ config['LANGUAGE_CONTENT']['html']['code']['placeholder_code'] }}">

    {% if error %}
    <div class="error-notify">{{ error }}</div>
    {% endif %}

    <input class="btn btn-submit" type="submit" value="{{ config['LANGUAGE_CONTENT']['html']['code']['submit_button'] }}">

    <label id="modal_trigger" class="text-center mt-2 link-line">{{ config['LANGUAGE_CONTENT']['html']['privacy_policy_label'] }}</label>
</form>
<script>
    function checkCodeForm() {
        // Get the value of the code input field
        const codeValue = document.getElementById('code').value;

        // Check if the length of the code is 4
        if (codeValue.length === 4) {
            // If the length is 4, submit the form
            document.getElementById('codeForm').submit();
          } else {
            // If the length is not 4, display an error message or handle it as per your requirement
            console.log('Code must be 4 characters long');
          }
    }
</script>
{% endblock %}
